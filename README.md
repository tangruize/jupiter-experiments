# TLC Batch

## Description
It is quite troublesome to test these similar and complicated tasks with the TLA+ Toolbox.
So the TLC Batch script was written to automatically check the Jupiter protocol family under different test scales.

## How to run
Simply make it.
```bash
# run all and output a markdown result file.
# configurations: combination of 3x3 (but no 3x3) scales using 10 workers with no state constraint.
make
make run
make WORKERS=  # using n workers. n will be set as physical cores.
make WORKERS=2  # using 2 workers.

# run refinement and output 4 latex result table files. configurations: 5x5 with state constraints.
# will only run AbsJupiterH, AJupiterImplXJupiter, CJupiterImplAbsJupiter and XJupiterImplCJupiter.
# NOTE: infeasible to get all results.
make run-refinement

# run a simplified refinement configuration. scales: (1, 4), (4, 1), (2, 4), (3, 3), (4, 2)
# NOTE: last 4 scales using state constraint that stop TLC if distinct states reached a certain value.
make run-refinement-minimal
```

## Others
Each time you run tlc, a subdirectory will be generated in the protocol directory,
such as `TypeOK (1 clients, 1 chars)`. This directory is used to store the tla file and cfg file required for running.

Any files start with `MC` may be helpful for you.

| filename                     | description                                  |
|------------------------------|----------------------------------------------|
| MC.cfg/MC.tla                | Generated by TLCWrapper.py. Required by TLC. |
| MC_out.txt                   | TLC (tool mode) log.                         |
| MC_user.txt                  | User output (using Print or PrintT).         |
| MC_states.dump/MC_states.dot | All states dump (if enabled).                |
| MC_coverage.txt              | Coverage information (if enabled.).          |

The `tlcwrapper.py` script encapsulates the running mode of tlc, which can be reused.
The first parameter of the script is the configuration file, the detailed rules of the configuration file can be found 
in `config.ini`; the second parameter is optional tlc log file (`MC_out.txt` by default).

---
Ruize Tang

2019-01-21 14:12:12

2019-02-01 23:48:06
